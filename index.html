<!--
Club Check-In Page

INSTRUCTIONS:
1) Replace the CONFIG values below:
    const FORM_ACTION = "https://docs.google.com/forms/d/e/HERE/formResponse";
    const ENTRY_FOR_NAME = "entry.THESE NUMBERS";
    const ENTRY_FOR_PHONE = "entry.THESE NUMBERS";
    const ENTRY_FOR_EMAIL = "entry.THESE NUMBERS";
    const ENTRY_FOR_BIRTHDAY = "entry.THESE NUMBERS";
    const ENTRY_FOR_FACULTY = "entry.THESE NUMBERS";


-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hillel Check-In</title>
  <style>
    @font-face {
      font-family: 'Neue Montreal';
      src: url('./fonts/NeueMontreal-Regular.otf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
  
    @font-face {
      font-family: 'Gilroy';
      src: url('./fonts/Gilroy-Regular.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
    @font-face {
      font-family: 'Gilroy Bold';
      src: url('./fonts/Gilroy-Bold.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
      font-display: swap;
    }
    :root{--bg:#f6f6f8;--card:#ffffff;--accent:rgb(5,49,154);--muted:#666}
    html,body{height:100%;margin:0;font-family: 'Gilroy', system-ui, sans-serif;}
    /* Entire page uses Gilroy */
    /* Background wrapper for the image (blurred) */
#background-wrapper {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-image: url('hillel.png');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  filter: blur(3px);  /* only the background is blurred */
  z-index: 0;
}

/* Dark overlay */
#background-overlay {
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(0, 0, 0, 0.4);
  pointer-events: none;
  z-index: 1;
}

body {
  margin: 0;
  padding: 20px;        /* adds breathing room from top/edges */
  position: relative;
  z-index: 2;
  font-size: 13px;
  overflow-y: auto;      /* ensures scroll if content taller than screen */
}

/* Your card */
.card {
  position: relative;
  z-index: 2;
  width: 400px;
  max-width: 92vw;
  background: var(--card);
  padding: 14px;
  border-radius: 10px;
  box-shadow: 0 6px 18px rgba(0,0,0,.08);
  text-align: left;
  font-size: 130%;
  margin: 0 auto;        /* centers card horizontally */
}
    strong, b {
      font-family: 'Gilroy Bold', 'Gilroy', system-ui, sans-serif;
      font-weight: 900;
     /* color: #000;*/ /* optional: makes it true black */
    }
    /* Only h1 uses Neue Montreal */
    h1 {
      margin: 0 0 0;             /* Remove bottom margin */
      margin-bottom: 12px;       /* more space below heading */
      font-family: 'Neue Montreal', system-ui, sans-serif;
      font-weight: 750;
      font-style: normal;
      font-size: 32px;           /* Desktop font size */
      line-height: 1em;
      letter-spacing: -0.5px;
      color: rgb(5, 49, 154);    /* Optional: add this if you want the blue color */
    }
    @media (max-width: 1023px) {
      h1 {
        font-size: 22px;
      }
    }
    h2{
      margin: 0 0 0;             /* Remove bottom margin */      /* more space below heading */
      font-family: 'Neue Montreal', system-ui, sans-serif;
      font-weight: 500;
      font-style: normal;
      color: #292d32;
      font-size: 24px;           /* Desktop font size */
      line-height: 1em;
      letter-spacing: -0.5px;
      /*color: rgb(5, 49, 154);*/    /* Optional: add this if you want the blue color */
    }
    @media (max-width: 1023px) {
      h2 {
        font-size: 16px;
      }
    }

    .intro p, .intro ul {
      font-size: 12px;     /* keep body text readable */
      line-height: 1.4;
      margin-bottom: 10px;
      display: block;
      margin-left: 4px;
      text-align: left;
      color: #292d32;
    }

    .intro ul {
      padding-left: 30px;  /* indent bullet list */
    }

    /* Placeholder text also scales */
input::placeholder,
textarea::placeholder {
  font-size: 1em;
}

    input[type=text],
input[type=tel],
input[type=grad],
input[type=email],
input[type=grad],
input[type=date],
select,
textarea,
button.action,
#submitReasonButton,
#reasonDropdown {
  font-size: 1em; /* 1em = 125% of default, inherits from .card */
}
    
    input[type=text],input[type=tel],input[type=email],input[type='grad'],input[type=date]{width:100%;padding:10px 10px;font-size:12px;margin-bottom:8px;border-radius:5px;border:none; background-color: rgb(230,230,230); box-sizing:border-box; font-family: Gilroy, Arial, Helvetica, sans-serif; color: rgb(52,58,64);}
    input[type=text]:focus, input[type=email]:focus, input[type='grad'],input[type=tel]:focus,input[type=date]:focus,select:focus{
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 3px var(--accent);
    }
    /*input[type=text]::placeholder {
      font-weight: normal;
      font-family: Gilroy, Arial, Helvetica, sans-serif;
      font-size: 17px;
      color: rgb(52, 58, 64) !important;
    }
      */
    button.action{width: 100%;height: auto; background-color: rgb(5,49,154); color: white; border: none; border-radius: 5px; padding: 8px 14px; font-family: 'Gilroy Bold', system-ui, sans-serif;font-size: 18px; cursor: pointer; letter-spacing: 0px; text-align: center; line-height: 1.2;}
    button.action:hover { background-color: rgb(4,40,125); }
    .outlined-btn{background: #d3d3d3; border: 3px #363636;color: #363636;border-radius: 4px;padding: 4px 8px;cursor: pointer;margin: 2px;font-size: 12px;}
    #status{margin-top:8px;font-weight:600;font-size:12px; color: #b00020}
    .footer{margin-top:12px;font-size:12px;color:var(--muted);font-weight: 600}
    .danger{color:#b00020}
    .row{display:flex;gap:8px}
      #welcomeMessage{
        margin-top: 8px;
        margin-bottom: 6px;
        font-weight: 600;
        font-size: 15px;
        color: #0b5cff;
      }

      #welcomeMessage.status-auto {
        color: #0b5cff; /* blue */
      }

      #welcomeMessage.status-success {
        color: green;
      }
      select {
        width: 100%;
        padding: 10px 36px 10px 12px; /* top right bottom left*/
        margin-bottom: 8px;
        font-size: 12px;
        border-radius: 5px;
        border: none;
        background-color: rgb(230, 230, 230);
        font-family: Gilroy, Arial, Helvetica, sans-serif;
        box-sizing: border-box;
        color: rgb(52,58,64);
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        cursor: pointer;

        background-image: url('data:image/svg+xml;utf8,<svg fill="dark gray" height="20" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/></svg>');
        background-repeat: no-repeat;
        background-position: right 10px center;
        background-size: 16px;
      }
      /*input[type=date] {
        font-family: 'Gilroy', system-ui, sans-serif;
        color: rgb(52,58,64);
      }
      */
      #inputSection input,
#reasonSection input,
#reasonSection select,
#reasonSection textarea {
  width: 100%;
  padding: 6px;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 12px;
  margin-bottom: 6px;
}
      input::placeholder {
        color:#808080 !important;
        font-weight: normal;
        font-family: 'Gilroy', Arial, Helvetica, sans-serif;
        font-size: 11px;
      }
      select {
  position: relative;
  z-index: 2; /* bring above background overlay */
}

#inputSection{
  max-width: 400px; /* optional: keeps form neat */
}

#inputSection label, #reasonSection label{
  display: block;
  margin-left: 4px;
  margin-bottom: 4px;
  font-weight: bold;
  text-align: left; /* ensures left alignment */
  color: #292d32;
}
#reasonSection {
  display: none;
  max-width: 400px;
     /* space above the whole section */
  margin-top: 6px;
     padding: 10px 12px;         /* breathing room inside */
  background: rgba(255,255,255,0.8); /* optional soft background */
  border-radius: 12px;   /* rounded corners */
}

#reasonSection h2 {
  font-size: 16px;
  margin-bottom: 6px;   /* space below the heading */
  color: #0b5cff;        /* consistent with welcome message */
}

/* Optional: extra spacing above the 'Please specify' inputs */
#reasonEvent, #reasonOther {
    margin-bottom: 14px;
}

#reasonDropdown {
  display: block;
  width: 100%;
  padding: 8px 10px;
  margin-bottom: 14px;   /* space between dropdown and button */
  font-size: 14px;
  border-radius: 6px;
  border: 1px solid #ccc;
}

#submitReasonButton {
  display: block;
  width: 100%;
  padding: 10px;
  font-size: 20px;
  border: none;
  border-radius: 6px;
  background-color: #0b5cff;
  color: white;
  cursor: pointer;
  transition: background 0.2s ease;
  margin-top: 14px;
}

#submitReasonButton:hover {
  background-color: #0945c2;
}

/* Make the group chat container left-aligned */
#groupChats {
  display: flex;
  flex-direction: column; /* stack labels vertically */
  padding-left: 4px;
  margin-left: 0;
}

label.smallCheckbox {
  display: flex;          /* checkbox + text inline */
  align-items: center;    /* vertical center of single-line text */
  gap: 6px;               /* space between checkbox and text */
  font-size: 12px;
  line-height: 1.2;
  color: #292d32;
  cursor: pointer;
  margin: 0px 375px 0px 0px ;    /* 4px from left of card, small bottom margin */
  padding: 2px 0;
  width: auto;            /* donâ€™t stretch full width */
  white-space: nowrap;    /* allow text to wrap */
}

label.smallCheckbox input[type="checkbox"] {
  flex-shrink: 0;         /* prevent shrinking */
  width: 12px;
  height: 12px;
  padding-left: 4px;
  margin: 0 0 4px 0;              /* no extra spacing */
}

</style>
</head>
<body>
  <div id="background-wrapper"></div>
  <div id="background-overlay"></div>
  <div class="card" role="main">
    
    <h1><strong>Hillel Queen's Contact Form 2025-2026</strong></h1>

    <div id="inputSection">

    <div class="intro">
      <h2><strong>Welcome to Hillel Queenâ€™s!</strong></h2>
      <p>Weâ€™re so excited to connect with you this year. Please fill out this form so we can keep you updated on everything happening at Hillel Queenâ€™s!</p>

      <p><strong><u>By sharing your contact information, youâ€™ll receive:</u></strong></p>
      <ul>
        <li>ðŸ“± <strong>Access to our group chats</strong> for easy communication and community connection</li>
        <li>ðŸ“© <strong>Our weekly newsletter with upcoming events</strong>, opportunities, and announcements</li>
        <li>ðŸŽ‰ <strong>Invitations and reminders for special programs</strong>, Shabbat dinners, and holiday celebrations</li>
      </ul>

      <p>Your information will only be used for Hillel Queenâ€™s communications and will not be shared outside of our organization.</p>
      <p><strong>Letâ€™s stay connected!<br>- Hillel Exec Team</strong></p>
    </div>


      <label for="fullName">Full Name</label>
      <input type="text" id="fullName" placeholder="Enter your name" />

      <label for="phone">Telephone Number</label>
      <input type="tel" id="phone" placeholder="Enter your phone number (optional)" />

      <label for="email">Queen's Email Address</label>
      <input type="email" id="email" placeholder="Enter your email address" />

      <!-- Newsletter Subscription -->
      <label class="smallCheckbox"><input type="checkbox" id="newsletter" checked> I want to join the weekly newsletter</label>

      <label for="grad">Estimated Graduation Year</label>
      <input type="text" id="grad" placeholder="Enter your estimated year of graduation" />


      <label for="birthday">When is your birthday? (We want to celebrate you!!)</label>
      <input type="date" id="birthday" />

      <label for="faculty">Faculty</label>
      <select id="faculty">
        <option value="" disabled selected>Select Faculty</option>
        <option value="Faculty of Arts and Science">Faculty of Arts and Science</option>
        <option value="Faculty of Education">Faculty of Education</option>
        <option value="Faculty of Health Sciences">Faculty of Health Sciences</option>
        <option value="Faculty of Law">Faculty of Law</option>
        <option value="School of Graduate Studies and Postdoctoral Affairs">School of Graduate Studies and Postdoctoral Affairs</option>
        <option value="MD Program">MD Program</option>
        <option value="School of Nursing">School of Nursing</option>
        <option value="Smith Engineering">Smith Engineering</option>
        <option value="Smith School of Business">Smith School of Business</option>
        <option value="Bader College">Bader College</option>
      </select>

      <!-- Group Chat Selection -->
      <label for="groupChats">Are you interested in joining any of the following Hillel Queen's group chats? Select all that apply.</label>
      <div id="groupChats">
        <label class="smallCheckbox"><input type="checkbox" value="Hillel Queen's Student Community"> Hillel Queen's Student Community</label>
        <label class="smallCheckbox"><input type="checkbox" value="Queen's Jews Class of 2029"> Queen's Jews Class of 2029 (only for people in that year)</label>
        <label class="smallCheckbox"><input type="checkbox" value="Queen's Jews Class of 2028"> Queen's Jews Class of 2028 (only for people in that year)</label>
        <label class="smallCheckbox"><input type="checkbox" value="Queen's Jews Class of 2027"> Queen's Jews Class of 2027 (only for people in that year)</label>
        <label class="smallCheckbox"><input type="checkbox" value="Lev Kingston"> Lev Kingston</label>
        <label class="smallCheckbox"><input type="checkbox" value="Rainbow Jews"> Rainbow Jews</label>
        <label class="smallCheckbox"><input type="checkbox" value="Jewski Queen's"> Jewski Queen's</label>
        <label class="smallCheckbox"><input type="checkbox" value="Jews at Queen's"> Jews at Queen's</label>
      </div>

      <button id="submitButton" class="action" type = "button">Submit</button>

    </div>

    <div id="welcomeMessage" style="display:none;"></div>


    <div id="status"></div>
  </div>

  <!-- hidden iframe used to submit the Google Form so the page doesn't navigate -->
  <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>


   <!--<form action="https://docs.google.com/forms/d/e/1FAIpQLSe6WCyUZUTdwGfrdI4o7sS9rYbmhnH-ysystS9rDprSf5zSwA/formResponse" method="POST" target="_blank">
  <input name="entryl1262182397" value="Test User">
  <button type="submit">Test Submit</button>
</form> -->
   
  <script>
    // ===== CONFIG =====
    // replace as such: https://docs.google.com/forms/d/e/REPLACE THIS/formResponse
    const FORM_ACTION = "https://docs.google.com/forms/d/e/1FAIpQLSd2MiuvYW-n1ex48YpLicISUYaokSFtWsW9l977IH_vElhVTw/formResponse";
    // replace with your Google Form field IDs
    const ENTRY_FOR_NAME = "entry.474565171";
    const ENTRY_FOR_PHONE = "entry.1002864921";
    const ENTRY_FOR_EMAIL = "entry.706071998";
    const ENTRY_FOR_NEWSLETTER = "entry.2040819415";
    const ENTRY_FOR_GRADYEAR = "entry.1573048952";
    const ENTRY_FOR_BIRTHDAY = "entry.295726554";
    const ENTRY_FOR_FACULTY = "entry.546594758";
    const ENTRY_FOR_GROUPCHAT = "entry.114880239";

    // ==================

    const submitButton = document.getElementById('submitButton');
    const status = document.getElementById('status');
    const nameInput = document.getElementById('fullName');
    const inputSection = document.getElementById('inputSection');
    const welcomeMessage = document.getElementById('welcomeMessage');
    


    function showWelcomeMessage(name, isAuto=false) {
      inputSection.style.display = 'none';

      welcomeText = "Thank you for sharing, we are looking forward to being in contact with you!";
      

      welcomeMessage.classList.remove('status-auto', 'status-success');
      welcomeMessage.classList.add('status-success');
      welcomeMessage.innerHTML = welcomeText;
      welcomeMessage.style.display = 'block';
      inputSection.style.display = "none";

      setTimeout(() => {clearDisplay(); status.textContent = ''; }, 1500);

         }

    function hideWelcomeMessage() {
      welcomeMessage.style.display = 'none';
      reasonSection.style.display = 'none';
      inputSection.style.display = 'block';
    }

    function handleSubmit(){
      
      //name=nameInput.value.trim(),phone=document.getElementById('phone').value.trim(),email=document.getElementById('email').value.trim(),birthday=document.getElementById('birthday').value,faculty=document.getElementById('faculty').value
      const name = nameInput.value.trim();
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const grad = document.getElementById('grad').value.trim();
      const birthday = document.getElementById('birthday').value;
      const faculty = document.getElementById('faculty').value;
      const newsletter = document.getElementById('newsletter').checked ? 'Yes' : 'No';
      
      // get selected group chats
      const groupChats = Array.from(document.querySelectorAll('#groupChats input[type="checkbox"]:checked'))
                          .map(cb => cb.value)
                          .join(", "); // join as comma-separated string

      //clear any previous error
      status.textContent = '';
      welcomeMessage.style.display = 'none';

      //validate name
       if (!name) {
          nameInput.focus()
          status.textContent = 'Please enter your full name.';
          welcomeMessage.style.display = 'none';
          return;
      }

      //validate phone (simple regex for 10 digits)
      // Phone validation: only if not empty
      if (phone) {
        // Remove everything except digits
        const phoneDigits = phone.replace(/\D/g, "");

        if (phoneDigits.length !== 10) {
        alert("Please enter a valid phone number with 10 digits, or leave it blank.");
        return;
        }
      }

      // Validate Email (simple email regex)
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        status.textContent = 'Please enter a valid email address.';
        return;
      }

      //validate grad year
      if (grad.length!==4||isNaN(grad)){
        status.textContent = 'Please enter a valid 4-digit graduation year.';
        return;
      }

      // Validate Birthday (ensure not empty)
      if (!birthday) {
        status.textContent = 'Please enter your birthday.';
        return;
      }

      // Validate Faculty (ensure selected)
      if (!faculty) {
        status.textContent = 'Please select your faculty.';
        return;
      }

      submitGoogle({name,phone,email,newsletter,grad,birthday,faculty,groupChats});

      showWelcomeMessage(name,false);


       }

    

    function clearDisplay() {
      nameInput.value = '';
      status.textContent = '';
      status.classList.remove("status-auto");
    }

    function submitGoogle(data){
       
      // build a form and submit it to the Google Form response endpoint inside the hidden iframe
      const form = document.createElement('form');
      form.method = 'POST';
      form.action = FORM_ACTION;
      form.target = 'hidden_iframe';

      console.log("Submitting data to Google:", data);

      const fields = {
        [ENTRY_FOR_NAME]: data.name,
        [ENTRY_FOR_PHONE]: data.phone,
        [ENTRY_FOR_EMAIL]: data.email,
        [ENTRY_FOR_NEWSLETTER]: data.newsletter,
        [ENTRY_FOR_GRADYEAR]: data.grad,
        [ENTRY_FOR_BIRTHDAY]: data.birthday,
        [ENTRY_FOR_FACULTY]: data.faculty,
      };


      for (const [key, value] of Object.entries(fields)) {
        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = key;
        input.value = value;
        form.appendChild(input);
      }

    // group chats: one hidden input per selected option
    if (data.groupChats) {
        data.groupChats.split(", ").forEach(option => {
            if(option !== "None"){  // ignore "None" if checked
                const input = document.createElement('input');
                input.type = 'hidden';
                input.name = ENTRY_FOR_GROUPCHAT;
                input.value = option;
                form.appendChild(input);
            }
        });
    }

      // append & submit
      document.body.appendChild(form);
      form.submit();

      // cleanup after a short delay
      setTimeout(()=>{ try{ document.body.removeChild(form);}catch(e){} }, 1500);
    }


    document.getElementById('submitButton').addEventListener('click', () => {

    handleSubmit();
    });

    // Auto-submit fallback after 15 seconds
    setTimeout(() => {
      autoSubmitIfAnyFilled();
    }, 20000); // 45000ms = 15s

    function autoSubmitIfAnyFilled() {
      const name = nameInput.value.trim();
      const phone = document.getElementById('phone').value.trim();
      const email = document.getElementById('email').value.trim();
      const grad = document.getElementById('grad').value.trim();
      const birthday = document.getElementById('birthday').value;
      const faculty = document.getElementById('faculty').value;

      // check if at least one field has data (ignoring newsletter checkbox)
      if (name || phone || email || grad || birthday || faculty) {
        // get selected group chats
        const groupChats = Array.from(document.querySelectorAll('#groupChats input[type="checkbox"]:checked'))
                                .map(cb => cb.value)
                                .join(", "); 

        const newsletter = document.getElementById('newsletter').checked ? 'Yes' : 'No';

        submitGoogle({name, phone, email, newsletter, grad, birthday, faculty, groupChats});
        showWelcomeMessage(name, true); // true = auto submit
      }
    }

  </script>
</body>
</html>
